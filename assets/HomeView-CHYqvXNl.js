import{u as P,l as F,q as H,c,w as a,b as o,t as n,a as l,e as i,s as j,v as u,x,y as C,F as h,z as M,A as b,V as N,f as S,r as U,B as r,h as q,o as d}from"./index-CtLIZ_KS.js";import{u as K}from"./settings-DhvrcEJ9.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as k}from"./VChip-BAFSQNr0.js";import{V as p}from"./VCard-CYj_gB-H.js";import{V as L,a as X}from"./VRow-CNx3At-o.js";import{V as J,a as Q}from"./VList-B1HYC3gR.js";import{V as W}from"./index-tKDXs71H.js";import{f as Y}from"./formatDistanceToNow-aDLjEcHe.js";const Z={class:"d-flex align-center justify-space-between mb-6"},ee={class:"text-body-2 text-medium-emphasis"},te={class:"d-flex justify-space-between align-center mb-2"},se={class:"text-subtitle-2 text-medium-emphasis"},ae={class:"text-body-2 font-weight-medium",style:{color:"#a78bfa"}},oe={class:"text-caption text-medium-emphasis mt-1"},le={key:0},ne={class:"d-flex align-center justify-space-between mb-3"},re={__name:"HomeView",setup(ie){const v=q(),$=P(),m=K(),f=U([]),y=[{code:"de",nativeName:"Deutsch"},{code:"fr",nativeName:"Français"},{code:"es",nativeName:"Español"},{code:"en",nativeName:"English"}];F(async()=>{try{const t=await H.get("/api/history");f.value=t.slice(0,3)}catch{}});const I=r(()=>{const t=new Date().getHours();return t<12?"Good morning!":t<18?"Good afternoon!":"Good evening!"}),V=r(()=>{var t;return((t=$.user)==null?void 0:t.stats)||{}}),w=r(()=>V.value.streak_days??0),T=r(()=>`xp_${m.language}`),g=r(()=>V.value[T.value]??0),_=r(()=>Math.floor(g.value/100)+1),A=r(()=>g.value%100),D=r(()=>`Level ${_.value}`),E=r(()=>{var t;return((t=y.find(e=>e.code===m.language))==null?void 0:t.nativeName.toUpperCase())||""});function B(t){return t>=80?"success":t>=55?"warning":"error"}function G(t){var s;return`${((s=y.find(z=>z.code===t.language))==null?void 0:s.nativeName)||t.language} · ${t.mode==="drill"?t.topic||"Drill":"Conversation"}`}function R(t){const e=Y(new Date(t.completed_at*1e3),{addSuffix:!0});return`${t.sentence_count} ${t.mode==="drill"?"sentences":"turns"} · ${e}`}return(t,e)=>(d(),c(W,{class:"pa-4 pb-24",style:{"max-width":"640px"}},{default:a(()=>[o("div",Z,[o("div",null,[e[4]||(e[4]=o("div",{class:"text-h5 font-weight-bold",style:{color:"#22d3ee"}},"Speak",-1)),o("div",ee,n(I.value),1)]),l(k,{color:"warning",variant:"tonal","prepend-icon":"mdi-fire"},{default:a(()=>[i(n(w.value)+" day"+n(w.value!==1?"s":""),1)]),_:1})]),l(p,{class:"mb-4 pa-4"},{default:a(()=>[e[5]||(e[5]=o("div",{class:"text-subtitle-2 text-medium-emphasis mb-3"},"PRACTICING",-1)),l(j,{modelValue:u(m).language,"onUpdate:modelValue":e[0]||(e[0]=s=>u(m).language=s),mandatory:"",color:"primary",class:"flex-wrap",style:{gap:"8px"}},{default:a(()=>[(d(!0),x(h,null,C(u(m).LANGS,s=>(d(),c(N,{key:s.code,value:s.code,variant:"tonal",size:"small"},{default:a(()=>[i(n(s.flag)+" "+n(s.nativeName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{class:"mb-6 pa-4"},{default:a(()=>[o("div",te,[o("div",se,n(E.value)+" LEVEL",1),o("div",ae,n(D.value),1)]),l(M,{"model-value":A.value,color:"secondary",rounded:"",height:"8","bg-color":"surface-variant"},null,8,["model-value"]),o("div",oe,n(g.value)+" XP · Level "+n(_.value),1)]),_:1}),e[14]||(e[14]=o("div",{class:"text-subtitle-2 text-medium-emphasis mb-3"},"START PRACTICING",-1)),l(X,{dense:"",class:"mb-6"},{default:a(()=>[l(L,{cols:"12",sm:"6"},{default:a(()=>[l(p,{class:"mode-card pa-5 cursor-pointer",onClick:e[1]||(e[1]=s=>u(v).push("/drill"))},{default:a(()=>[l(b,{size:"36",color:"primary",class:"mb-3"},{default:a(()=>[...e[6]||(e[6]=[i("mdi-repeat",-1)])]),_:1}),e[7]||(e[7]=o("div",{class:"text-h6 font-weight-bold mb-1"},"Sentence Drills",-1)),e[8]||(e[8]=o("div",{class:"text-body-2 text-medium-emphasis"},"Repeat targeted sentences. Compare your intonation with the native speaker.",-1))]),_:1})]),_:1}),l(L,{cols:"12",sm:"6"},{default:a(()=>[l(p,{class:"mode-card pa-5 cursor-pointer",onClick:e[2]||(e[2]=s=>u(v).push("/conversation"))},{default:a(()=>[l(b,{size:"36",color:"secondary",class:"mb-3"},{default:a(()=>[...e[9]||(e[9]=[i("mdi-forum",-1)])]),_:1}),e[10]||(e[10]=o("div",{class:"text-h6 font-weight-bold mb-1"},"Free Conversation",-1)),e[11]||(e[11]=o("div",{class:"text-body-2 text-medium-emphasis"},"Have a natural conversation with the AI. Speak and listen in real-time.",-1))]),_:1})]),_:1})]),_:1}),f.value.length>0?(d(),x("div",le,[o("div",ne,[e[13]||(e[13]=o("div",{class:"text-subtitle-2 text-medium-emphasis"},"RECENT SESSIONS",-1)),l(N,{variant:"text",size:"small",onClick:e[3]||(e[3]=s=>u(v).push("/history"))},{default:a(()=>[...e[12]||(e[12]=[i("View all",-1)])]),_:1})]),l(J,{lines:"two",class:"rounded-lg","bg-color":"surface"},{default:a(()=>[(d(!0),x(h,null,C(f.value,s=>(d(),c(Q,{key:s.id,title:G(s),subtitle:R(s)},{prepend:a(()=>[l(b,{color:s.mode==="drill"?"primary":"secondary"},{default:a(()=>[i(n(s.mode==="drill"?"mdi-repeat":"mdi-forum"),1)]),_:2},1032,["color"])]),append:a(()=>[s.avg_score?(d(),c(k,{key:0,color:B(s.avg_score),variant:"tonal",size:"x-small"},{default:a(()=>[i(n(Math.round(s.avg_score))+"% ",1)]),_:2},1032,["color"])):S("",!0)]),_:2},1032,["title","subtitle"]))),128))]),_:1})])):S("",!0)]),_:1}))}},be=O(re,[["__scopeId","data-v-c1f596e7"]]);export{be as default};
